{"ast":null,"code":"var _jsxFileName = \"C:\\\\React\\\\team_one\\\\src\\\\components\\\\comments\\\\CommentForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport useCommentMutation from '../../hooks/useCommentMutation';\nimport baseProfile from '../../image/baseprofile.jpeg';\nimport * as S from './Styled.Comments';\nimport { jotaiUserDataAtom } from '../common/Header';\nimport { useAtom } from 'jotai';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentForm = ({\n  pid\n}) => {\n  _s();\n  const {\n    addCommentMutation\n  } = useCommentMutation();\n  const [commentText, setCommentText] = useState('');\n  const [jotaiUserData] = useAtom(jotaiUserDataAtom);\n  const handleCommentInputChange = e => {\n    setCommentText(e.target.value);\n  };\n  const handleAddSubmitBtn = e => {\n    e.preventDefault();\n    if (!jotaiUserData) {\n      alert('로그인 후 사용 가능합니다.');\n      return false;\n    }\n    if (commentText === '') {\n      alert('댓글을 작성해 주세요.');\n      return false;\n    }\n    const newComment = {\n      uid: jotaiUserData.uid || '',\n      // Convert null to empty string\n      pid: Number(pid),\n      nickname: jotaiUserData.nickname || '',\n      body: commentText,\n      created_at: new Date().toISOString(),\n      profileimg: jotaiUserData.profileimg || ''\n    };\n    addCommentMutation.mutate(newComment);\n    setCommentText('');\n  };\n  return /*#__PURE__*/_jsxDEV(S.CommentForm, {\n    onSubmit: handleAddSubmitBtn,\n    children: /*#__PURE__*/_jsxDEV(S.CommentItem, {\n      children: [/*#__PURE__*/_jsxDEV(S.CommentProfileImgBox, {\n        children: jotaiUserData !== null && jotaiUserData !== void 0 && jotaiUserData.profileimg ? /*#__PURE__*/_jsxDEV(S.CommentProfileImg, {\n          src: `${process.env.REACT_APP_SUPABASE_STORAGE_URL}${jotaiUserData === null || jotaiUserData === void 0 ? void 0 : jotaiUserData.profileimg}`,\n          alt: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(S.CommentProfileImg, {\n          src: `${baseProfile}`,\n          alt: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.CommentInput, {\n        type: \"text\",\n        value: commentText,\n        onChange: handleCommentInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.CommentPanel, {\n        children: /*#__PURE__*/_jsxDEV(S.Button, {\n          width: \"50px\",\n          height: \"30px\",\n          children: \"\\uB4F1\\uB85D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentForm, \"m0IB620YtOgk0wf01eQCD9VU/CQ=\", false, function () {\n  return [useCommentMutation, useAtom];\n});\n_c = CommentForm;\nexport default CommentForm;\nvar _c;\n$RefreshReg$(_c, \"CommentForm\");","map":{"version":3,"names":["React","useState","useCommentMutation","baseProfile","S","jotaiUserDataAtom","useAtom","jsxDEV","_jsxDEV","CommentForm","pid","_s","addCommentMutation","commentText","setCommentText","jotaiUserData","handleCommentInputChange","e","target","value","handleAddSubmitBtn","preventDefault","alert","newComment","uid","Number","nickname","body","created_at","Date","toISOString","profileimg","mutate","onSubmit","children","CommentItem","CommentProfileImgBox","CommentProfileImg","src","process","env","REACT_APP_SUPABASE_STORAGE_URL","alt","fileName","_jsxFileName","lineNumber","columnNumber","CommentInput","type","onChange","CommentPanel","Button","width","height","_c","$RefreshReg$"],"sources":["C:/React/team_one/src/components/comments/CommentForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport useCommentMutation from '../../hooks/useCommentMutation';\r\nimport baseProfile from '../../image/baseprofile.jpeg';\r\nimport * as S from './Styled.Comments';\r\nimport { jotaiUserDataAtom } from '../common/Header';\r\nimport { useAtom } from 'jotai';\r\n\r\ninterface CommentFormProps {\r\n  pid: string;\r\n}\r\n\r\nconst CommentForm = ({ pid }: CommentFormProps) => {\r\n  const { addCommentMutation } = useCommentMutation();\r\n  const [commentText, setCommentText] = useState('');\r\n\r\n  const [jotaiUserData] = useAtom(jotaiUserDataAtom);\r\n\r\n  const handleCommentInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setCommentText(e.target.value);\r\n  };\r\n  const handleAddSubmitBtn = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n\r\n    if (!jotaiUserData) {\r\n      alert('로그인 후 사용 가능합니다.');\r\n      return false;\r\n    }\r\n\r\n    if (commentText === '') {\r\n      alert('댓글을 작성해 주세요.');\r\n      return false;\r\n    }\r\n\r\n    const newComment = {\r\n      uid: jotaiUserData.uid || '', // Convert null to empty string\r\n      pid: Number(pid),\r\n      nickname: jotaiUserData.nickname || '',\r\n      body: commentText,\r\n      created_at: new Date().toISOString(),\r\n      profileimg: jotaiUserData.profileimg || ''\r\n    };\r\n    addCommentMutation.mutate(newComment);\r\n    setCommentText('');\r\n  };\r\n  return (\r\n    <S.CommentForm onSubmit={handleAddSubmitBtn}>\r\n      <S.CommentItem>\r\n        <S.CommentProfileImgBox>\r\n          {jotaiUserData?.profileimg ? (\r\n            <S.CommentProfileImg\r\n              src={`${process.env.REACT_APP_SUPABASE_STORAGE_URL}${jotaiUserData?.profileimg}`}\r\n              alt=\"Profile\"\r\n            />\r\n          ) : (\r\n            <S.CommentProfileImg src={`${baseProfile}`} alt=\"Profile\" />\r\n          )}\r\n        </S.CommentProfileImgBox>\r\n        <S.CommentInput type=\"text\" value={commentText} onChange={handleCommentInputChange} />\r\n        <S.CommentPanel>\r\n          <S.Button width=\"50px\" height=\"30px\">\r\n            등록\r\n          </S.Button>\r\n        </S.CommentPanel>\r\n      </S.CommentItem>\r\n    </S.CommentForm>\r\n  );\r\n};\r\n\r\nexport default CommentForm;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,kBAAkB,MAAM,gCAAgC;AAC/D,OAAOC,WAAW,MAAM,8BAA8B;AACtD,OAAO,KAAKC,CAAC,MAAM,mBAAmB;AACtC,SAASC,iBAAiB,QAAQ,kBAAkB;AACpD,SAASC,OAAO,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAMhC,MAAMC,WAAW,GAAGA,CAAC;EAAEC;AAAsB,CAAC,KAAK;EAAAC,EAAA;EACjD,MAAM;IAAEC;EAAmB,CAAC,GAAGV,kBAAkB,CAAC,CAAC;EACnD,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAElD,MAAM,CAACc,aAAa,CAAC,GAAGT,OAAO,CAACD,iBAAiB,CAAC;EAElD,MAAMW,wBAAwB,GAAIC,CAAsC,IAAK;IAC3EH,cAAc,CAACG,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAChC,CAAC;EACD,MAAMC,kBAAkB,GAAIH,CAAmC,IAAK;IAClEA,CAAC,CAACI,cAAc,CAAC,CAAC;IAElB,IAAI,CAACN,aAAa,EAAE;MAClBO,KAAK,CAAC,iBAAiB,CAAC;MACxB,OAAO,KAAK;IACd;IAEA,IAAIT,WAAW,KAAK,EAAE,EAAE;MACtBS,KAAK,CAAC,cAAc,CAAC;MACrB,OAAO,KAAK;IACd;IAEA,MAAMC,UAAU,GAAG;MACjBC,GAAG,EAAET,aAAa,CAACS,GAAG,IAAI,EAAE;MAAE;MAC9Bd,GAAG,EAAEe,MAAM,CAACf,GAAG,CAAC;MAChBgB,QAAQ,EAAEX,aAAa,CAACW,QAAQ,IAAI,EAAE;MACtCC,IAAI,EAAEd,WAAW;MACjBe,UAAU,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACpCC,UAAU,EAAEhB,aAAa,CAACgB,UAAU,IAAI;IAC1C,CAAC;IACDnB,kBAAkB,CAACoB,MAAM,CAACT,UAAU,CAAC;IACrCT,cAAc,CAAC,EAAE,CAAC;EACpB,CAAC;EACD,oBACEN,OAAA,CAACJ,CAAC,CAACK,WAAW;IAACwB,QAAQ,EAAEb,kBAAmB;IAAAc,QAAA,eAC1C1B,OAAA,CAACJ,CAAC,CAAC+B,WAAW;MAAAD,QAAA,gBACZ1B,OAAA,CAACJ,CAAC,CAACgC,oBAAoB;QAAAF,QAAA,EACpBnB,aAAa,aAAbA,aAAa,eAAbA,aAAa,CAAEgB,UAAU,gBACxBvB,OAAA,CAACJ,CAAC,CAACiC,iBAAiB;UAClBC,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,8BAA+B,GAAE1B,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEgB,UAAW,EAAE;UACjFW,GAAG,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACd,CAAC,gBAEFtC,OAAA,CAACJ,CAAC,CAACiC,iBAAiB;UAACC,GAAG,EAAG,GAAEnC,WAAY,EAAE;UAACuC,GAAG,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAC5D;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACqB,CAAC,eACzBtC,OAAA,CAACJ,CAAC,CAAC2C,YAAY;QAACC,IAAI,EAAC,MAAM;QAAC7B,KAAK,EAAEN,WAAY;QAACoC,QAAQ,EAAEjC;MAAyB;QAAA2B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACtFtC,OAAA,CAACJ,CAAC,CAAC8C,YAAY;QAAAhB,QAAA,eACb1B,OAAA,CAACJ,CAAC,CAAC+C,MAAM;UAACC,KAAK,EAAC,MAAM;UAACC,MAAM,EAAC,MAAM;UAAAnB,QAAA,EAAC;QAErC;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAU;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEpB,CAAC;AAACnC,EAAA,CAvDIF,WAAW;EAAA,QACgBP,kBAAkB,EAGzBI,OAAO;AAAA;AAAAgD,EAAA,GAJ3B7C,WAAW;AAyDjB,eAAeA,WAAW;AAAC,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}