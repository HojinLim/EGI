{"ast":null,"code":"var _jsxFileName = \"C:\\\\React\\\\team_one\\\\src\\\\components\\\\common\\\\Header.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { atom, useAtom } from 'jotai';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport Login, { userAtom, userEmailAtom } from '../user/login/Login';\nimport { sosialUserAtom } from '../user/social/SosialLogin';\nimport { getUserInfo, sigOutService } from '../../services/supabase/auth';\nimport { supabase } from '../../services/supabase/supabase';\nimport { useNavigate } from 'react-router';\nimport { Dropdown } from 'antd';\nimport { Link } from 'react-router-dom';\nimport icon from '../../image/icon.png';\nimport * as S from './Styled.Header';\nimport * as SL from '../common/Styled.Loading';\nimport Search from './Search';\nimport { useLocation } from 'react-router-dom';\nimport { DownOutlined } from '@ant-design/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const jotaiUserDataAtom = atom(null);\nexport const usersAtom = atom([]);\nconst Header = () => {\n  _s();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [loginModal, setLoginModal] = useState(false);\n  const location = useLocation();\n  const [users, setusers] = useAtom(usersAtom);\n  const [user, setUser] = useAtom(userAtom);\n  const [userEmail, setUserEmail] = useAtom(userEmailAtom);\n  const [jotaiUserData, setJotaiUserData] = useAtom(jotaiUserDataAtom);\n  const [socialUser, setSocialUser] = useAtom(sosialUserAtom);\n  console.log('user', user);\n  console.log('socialUser', socialUser);\n  // 유저 정보 조회하는 쿼리\n  const {\n    isLoading,\n    isError,\n    data: userData\n  } = useQuery(['users', userEmail], () => getUserInfo(userEmail), {\n    staleTime: 300000,\n    enabled: userEmail !== null\n  });\n\n  // 로그아웃 뮤테이션\n  const logoutMutation = useMutation(() => sigOutService(), {\n    onSuccess: () => {\n      setJotaiUserData(null);\n      setUserEmail('');\n      localStorage.removeItem('jotaiUserData');\n      queryClient.invalidateQueries(['users', userEmail]);\n    }\n  });\n  console.log('users', users);\n\n  // 로그아웃 핸들러\n  const signOutHandler = async () => {\n    try {\n      setSocialUser(null);\n      setUser(null); // userData 초기화\n      setUserEmail('');\n      navigate('/');\n      setLoginModal(true);\n      await logoutMutation.mutateAsync();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  // 이메일 로그인 토큰 생성 => jotaiUserData\n  useEffect(() => {\n    if (userData) {\n      const userDataString = JSON.stringify(userData);\n      localStorage.setItem('jotaiUserData', userDataString);\n      setJotaiUserData(userData);\n    }\n  }, [userData]);\n\n  // 소셜 로그인 토큰 생성 => jotaiUserData\n  useEffect(() => {\n    if (!(socialUser !== null && socialUser !== void 0 && socialUser.identities)) {\n      return;\n    } else if ((socialUser === null || socialUser === void 0 ? void 0 : socialUser.identities[0].provider) !== 'email') {\n      const tokenKey = localStorage.getItem('sb-bbakvkybkyfoiijevbec-auth-token');\n      const parsedToken = tokenKey ? JSON.parse(tokenKey) : null;\n      const userId = parsedToken === null || parsedToken === void 0 ? void 0 : parsedToken.user.id;\n      const userName = parsedToken === null || parsedToken === void 0 ? void 0 : parsedToken.user.user_metadata.name;\n      const userEmail = parsedToken === null || parsedToken === void 0 ? void 0 : parsedToken.user.email;\n      const userInsertData = {\n        uid: userId,\n        nickname: userName,\n        profileimg: 'neverdelete/461839d7-4ae5-4981-a29c-7793179d98ac.jpeg',\n        email: userEmail,\n        password: ''\n      };\n      const userDataString = JSON.stringify(userInsertData);\n      localStorage.setItem('jotaiUserData', userDataString);\n      setJotaiUserData(userInsertData);\n    }\n  }, [socialUser]);\n\n  // 생성한 토큰 가져와서 새로고침 방지\n  useEffect(() => {\n    const storedUserData = localStorage.getItem('jotaiUserData');\n    if (storedUserData) {\n      const parsedUserData = JSON.parse(storedUserData);\n      setJotaiUserData(parsedUserData);\n    }\n  }, []);\n\n  // 현재 유저의 정보 가져오기!\n  const checkUser = async () => {\n    const {\n      data: {\n        user\n      }\n    } = await supabase.auth.getUser();\n    if (!(user !== null && user !== void 0 && user.identities)) {\n      return;\n    } else if ((user === null || user === void 0 ? void 0 : user.identities[0].provider) == 'github' || (user === null || user === void 0 ? void 0 : user.identities[0].provider) == 'google') {\n      setSocialUser(user);\n    }\n  };\n\n  // window.addEventListener('hashchange' =>브라우저의 URL 해시(예: # 뒤의 일부)가 변경될 때 발생!\n  // 의존성 배열을 빈 배열([])을 전달했기 때문에, 컴포넌트가 처음 렌더링될 때 한 번만 실행되며, 이후에는 의존성 변경 없이는 다시 실행되지 않음\n  useEffect(() => {\n    checkUser();\n    window.addEventListener('hashchange', function () {\n      checkUser();\n    });\n  }, []);\n\n  // 로그인 모달 오픈\n  const showModal = () => {\n    const fetchPosts = async () => {\n      const {\n        data,\n        error\n      } = await supabase.from('users').select('*');\n      if (error) {\n        console.error('Error fetching posts:', error);\n      } else {\n        const userData = data.map(user => ({\n          ...user\n        }));\n        setusers(userData);\n      }\n    };\n    fetchPosts();\n    setLoginModal(true);\n  };\n\n  // 안트 디자인 드롭박스\n  const items = [{\n    key: '1',\n    label: /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/post\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uC0C1\\uD488 \\uB4F1\\uB85D\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this)\n  }, {\n    key: '2',\n    label: /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/mypage\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }, this)\n  }, {\n    key: '3',\n    label: /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: signOutHandler,\n      children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 14\n    }, this)\n  }];\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(SL.LoadingOverlay, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 12\n    }, this);\n  }\n  if (isError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\uB370\\uC774\\uD130\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uB3D9\\uC548 \\uC624\\uB958\\uAC00 \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(S.HeaderContainer, {\n      children: [/*#__PURE__*/_jsxDEV(S.Logo, {\n        src: icon,\n        onClick: () => navigate('/')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), location.pathname === '/' && /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 39\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [jotaiUserData ? /*#__PURE__*/_jsxDEV(S.ProfileWrapper, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: jotaiUserData ? /*#__PURE__*/_jsxDEV(S.ProfileBox, {\n              children: [/*#__PURE__*/_jsxDEV(S.ProfileImg, {\n                src: `${process.env.REACT_APP_SUPABASE_STORAGE_URL}${jotaiUserData.profileimg}`,\n                alt: \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(S.NickName, {\n                children: jotaiUserData.nickname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 21\n              }, this)]\n            }, jotaiUserData.uid, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 19\n            }, this) : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(S.ButtonWrapper, {\n            children: /*#__PURE__*/_jsxDEV(S.ButtonBox, {\n              children: /*#__PURE__*/_jsxDEV(Dropdown, {\n                menu: {\n                  items\n                },\n                placement: \"bottomRight\",\n                arrow: {\n                  pointAtCenter: true\n                },\n                children: /*#__PURE__*/_jsxDEV(DownOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(S.LoginButton, {\n          onClick: showModal,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), loginModal && /*#__PURE__*/_jsxDEV(Login, {\n          setLoginModal: setLoginModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(S.Line, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Header, \"5v5xFWACXhQMeL7ENfV8upB/9jE=\", false, function () {\n  return [useNavigate, useQueryClient, useLocation, useAtom, useAtom, useAtom, useAtom, useAtom, useQuery, useMutation];\n});\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useEffect","useState","atom","useAtom","useMutation","useQuery","useQueryClient","Login","userAtom","userEmailAtom","sosialUserAtom","getUserInfo","sigOutService","supabase","useNavigate","Dropdown","Link","icon","S","SL","Search","useLocation","DownOutlined","jsxDEV","_jsxDEV","Fragment","_Fragment","jotaiUserDataAtom","usersAtom","Header","_s","navigate","queryClient","loginModal","setLoginModal","location","users","setusers","user","setUser","userEmail","setUserEmail","jotaiUserData","setJotaiUserData","socialUser","setSocialUser","console","log","isLoading","isError","data","userData","staleTime","enabled","logoutMutation","onSuccess","localStorage","removeItem","invalidateQueries","signOutHandler","mutateAsync","error","userDataString","JSON","stringify","setItem","identities","provider","tokenKey","getItem","parsedToken","parse","userId","id","userName","user_metadata","name","email","userInsertData","uid","nickname","profileimg","password","storedUserData","parsedUserData","checkUser","auth","getUser","window","addEventListener","showModal","fetchPosts","from","select","map","items","key","label","to","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","LoadingOverlay","HeaderContainer","Logo","src","pathname","ProfileWrapper","ProfileBox","ProfileImg","process","env","REACT_APP_SUPABASE_STORAGE_URL","alt","NickName","ButtonWrapper","ButtonBox","menu","placement","arrow","pointAtCenter","LoginButton","Line","_c","$RefreshReg$"],"sources":["C:/React/team_one/src/components/common/Header.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { atom, useAtom } from 'jotai';\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport Login, { userAtom, userEmailAtom } from '../user/login/Login';\r\nimport { sosialUserAtom } from '../user/social/SosialLogin';\r\nimport { getUserInfo, sigOutService } from '../../services/supabase/auth';\r\n\r\nimport { supabase } from '../../services/supabase/supabase';\r\nimport { useNavigate } from 'react-router';\r\n\r\nimport { Dropdown } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport icon from '../../image/icon.png';\r\nimport * as S from './Styled.Header';\r\nimport * as SL from '../common/Styled.Loading';\r\nimport Search from './Search';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport type { UserType, UserTypes } from '../../types/supabase';\r\nimport type { MenuProps } from 'antd';\r\nimport { DownOutlined } from '@ant-design/icons';\r\n\r\nexport const jotaiUserDataAtom = atom<Omit<UserTypes, 'password'> | null>(null);\r\nexport const usersAtom = atom<Array<{ nickname: string; email: string }>>([]);\r\n\r\nconst Header = () => {\r\n  const navigate = useNavigate();\r\n  const queryClient = useQueryClient();\r\n  const [loginModal, setLoginModal] = useState(false);\r\n  const location = useLocation();\r\n  const [users, setusers] = useAtom(usersAtom);\r\n\r\n  const [user, setUser] = useAtom(userAtom);\r\n  const [userEmail, setUserEmail] = useAtom(userEmailAtom);\r\n  const [jotaiUserData, setJotaiUserData] = useAtom(jotaiUserDataAtom);\r\n  const [socialUser, setSocialUser] = useAtom(sosialUserAtom);\r\n  console.log('user', user);\r\n  console.log('socialUser', socialUser);\r\n  // 유저 정보 조회하는 쿼리\r\n  const {\r\n    isLoading,\r\n    isError,\r\n    data: userData\r\n  } = useQuery<Omit<UserType, 'password'> | null>(['users', userEmail], () => getUserInfo(userEmail), {\r\n    staleTime: 300000,\r\n    enabled: userEmail !== null\r\n  });\r\n\r\n  // 로그아웃 뮤테이션\r\n  const logoutMutation = useMutation(() => sigOutService(), {\r\n    onSuccess: () => {\r\n      setJotaiUserData(null);\r\n      setUserEmail('');\r\n      localStorage.removeItem('jotaiUserData');\r\n      queryClient.invalidateQueries(['users', userEmail]);\r\n    }\r\n  });\r\n\r\n  console.log('users', users);\r\n\r\n  // 로그아웃 핸들러\r\n  const signOutHandler = async () => {\r\n    try {\r\n      setSocialUser(null);\r\n      setUser(null); // userData 초기화\r\n      setUserEmail('');\r\n      navigate('/');\r\n      setLoginModal(true);\r\n      await logoutMutation.mutateAsync();\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  // 이메일 로그인 토큰 생성 => jotaiUserData\r\n  useEffect(() => {\r\n    if (userData) {\r\n      const userDataString = JSON.stringify(userData);\r\n      localStorage.setItem('jotaiUserData', userDataString);\r\n      setJotaiUserData(userData);\r\n    }\r\n  }, [userData]);\r\n\r\n  // 소셜 로그인 토큰 생성 => jotaiUserData\r\n  useEffect(() => {\r\n    if (!socialUser?.identities) {\r\n      return;\r\n    } else if (socialUser?.identities[0].provider !== 'email') {\r\n      const tokenKey = localStorage.getItem('sb-bbakvkybkyfoiijevbec-auth-token');\r\n      const parsedToken = tokenKey ? JSON.parse(tokenKey) : null;\r\n\r\n      const userId = parsedToken?.user.id;\r\n      const userName = parsedToken?.user.user_metadata.name;\r\n      const userEmail = parsedToken?.user.email;\r\n\r\n      const userInsertData = {\r\n        uid: userId,\r\n        nickname: userName,\r\n        profileimg: 'neverdelete/461839d7-4ae5-4981-a29c-7793179d98ac.jpeg',\r\n        email: userEmail,\r\n        password: ''\r\n      };\r\n      const userDataString = JSON.stringify(userInsertData);\r\n      localStorage.setItem('jotaiUserData', userDataString);\r\n      setJotaiUserData(userInsertData);\r\n    }\r\n  }, [socialUser]);\r\n\r\n  // 생성한 토큰 가져와서 새로고침 방지\r\n  useEffect(() => {\r\n    const storedUserData = localStorage.getItem('jotaiUserData');\r\n    if (storedUserData) {\r\n      const parsedUserData = JSON.parse(storedUserData);\r\n      setJotaiUserData(parsedUserData);\r\n    }\r\n  }, []);\r\n\r\n  // 현재 유저의 정보 가져오기!\r\n  const checkUser = async () => {\r\n    const {\r\n      data: { user }\r\n    } = await supabase.auth.getUser();\r\n\r\n    if (!user?.identities) {\r\n      return;\r\n    } else if (user?.identities[0].provider == 'github' || user?.identities[0].provider == 'google') {\r\n      setSocialUser(user);\r\n    }\r\n  };\r\n\r\n  // window.addEventListener('hashchange' =>브라우저의 URL 해시(예: # 뒤의 일부)가 변경될 때 발생!\r\n  // 의존성 배열을 빈 배열([])을 전달했기 때문에, 컴포넌트가 처음 렌더링될 때 한 번만 실행되며, 이후에는 의존성 변경 없이는 다시 실행되지 않음\r\n  useEffect(() => {\r\n    checkUser();\r\n    window.addEventListener('hashchange', function () {\r\n      checkUser();\r\n    });\r\n  }, []);\r\n\r\n  // 로그인 모달 오픈\r\n  const showModal = () => {\r\n    const fetchPosts = async () => {\r\n      const { data, error } = await supabase.from('users').select('*');\r\n\r\n      if (error) {\r\n        console.error('Error fetching posts:', error);\r\n      } else {\r\n        const userData = data.map((user) => ({\r\n          ...user\r\n        }));\r\n\r\n        setusers(userData);\r\n      }\r\n    };\r\n\r\n    fetchPosts();\r\n\r\n    setLoginModal(true);\r\n  };\r\n\r\n  // 안트 디자인 드롭박스\r\n  const items: MenuProps['items'] = [\r\n    {\r\n      key: '1',\r\n      label: (\r\n        <Link to=\"/post\">\r\n          <div>상품 등록하기</div>\r\n        </Link>\r\n      )\r\n    },\r\n    {\r\n      key: '2',\r\n      label: (\r\n        <Link to=\"/mypage\">\r\n          <div>마이페이지</div>\r\n        </Link>\r\n      )\r\n    },\r\n    {\r\n      key: '3',\r\n      label: <div onClick={signOutHandler}>로그아웃</div>\r\n    }\r\n  ];\r\n\r\n  if (isLoading) {\r\n    return <SL.LoadingOverlay />;\r\n  }\r\n\r\n  if (isError) {\r\n    return <div>데이터를 불러오는 동안 오류가 발생했습니다</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <S.HeaderContainer>\r\n        <S.Logo src={icon} onClick={() => navigate('/')} />\r\n\r\n        {location.pathname === '/' && <Search />}\r\n        <div>\r\n          {jotaiUserData ? (\r\n            <S.ProfileWrapper>\r\n              <div>\r\n                {jotaiUserData ? (\r\n                  <S.ProfileBox key={jotaiUserData.uid}>\r\n                    <S.ProfileImg\r\n                      src={`${process.env.REACT_APP_SUPABASE_STORAGE_URL}${jotaiUserData.profileimg}`}\r\n                      alt=\"Profile\"\r\n                    />\r\n                    <S.NickName>{jotaiUserData.nickname}</S.NickName>\r\n                  </S.ProfileBox>\r\n                ) : null}\r\n              </div>\r\n              <S.ButtonWrapper>\r\n                <S.ButtonBox>\r\n                  <Dropdown menu={{ items }} placement=\"bottomRight\" arrow={{ pointAtCenter: true }}>\r\n                    <DownOutlined />\r\n                  </Dropdown>\r\n                </S.ButtonBox>\r\n              </S.ButtonWrapper>\r\n            </S.ProfileWrapper>\r\n          ) : (\r\n            <S.LoginButton onClick={showModal}>Login</S.LoginButton>\r\n          )}\r\n\r\n          {loginModal && <Login setLoginModal={setLoginModal} />}\r\n        </div>\r\n      </S.HeaderContainer>\r\n      <S.Line></S.Line>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}