{"ast":null,"code":"var _jsxFileName = \"C:\\\\React\\\\team_one\\\\src\\\\components\\\\payment\\\\payment.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useAtom } from 'jotai';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Payment = ({\n  handlePayment,\n  post\n}) => {\n  _s();\n  const [jotaiUserData, setJotaiUserData] = useAtom(jotaiUserDataAtom);\n  const queryClient = useQueryClient();\n\n  // 생성한 토큰 가져와서 새로고침 방지\n  useEffect(() => {\n    const storedUserData = localStorage.getItem('jotaiUserData');\n    if (storedUserData) {\n      const parsedUserData = JSON.parse(storedUserData);\n      setJotaiUserData(parsedUserData);\n      queryClient.invalidateQueries(['users', userEmail]);\n    }\n  }, []);\n  const handlePaymentClick = (pg, post) => {\n    if (!post) {\n      console.error('Post is not available.');\n      return;\n    }\n    const paymentInfo = {\n      pg: pg,\n      pay_method: 'card',\n      merchant_uid: 'merchant_' + new Date().getTime(),\n      name: post.title,\n      amount: post.price || 0,\n      buyer_name: post.nickname,\n      buyer_tel: '010-1234-5678',\n      buyer_email: 'test@naver.com'\n    };\n    handlePayment(paymentInfo);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handlePaymentClick('kakaopay', post),\n      children: \"\\uCE74\\uCE74\\uC624\\uD398\\uC774 \\uACB0\\uC81C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handlePaymentClick('inicis', post),\n      children: \"\\uC774\\uB2C8\\uC2DC\\uC2A4 \\uACB0\\uC81C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handlePaymentClick('tosspay', post),\n      children: \"\\uD1A0\\uC2A4\\uD398\\uC774 \\uACB0\\uC81C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(Payment, \"ZQdYM6PBNkK3yW54lLzNdmdDqqI=\", true, function () {\n  return [useAtom];\n});\n_c = Payment;\nexport default Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useEffect","useAtom","jsxDEV","_jsxDEV","Payment","handlePayment","post","_s","jotaiUserData","setJotaiUserData","jotaiUserDataAtom","queryClient","useQueryClient","storedUserData","localStorage","getItem","parsedUserData","JSON","parse","invalidateQueries","userEmail","handlePaymentClick","pg","console","error","paymentInfo","pay_method","merchant_uid","Date","getTime","name","title","amount","price","buyer_name","nickname","buyer_tel","buyer_email","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/React/team_one/src/components/payment/payment.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { RequestPayParams } from 'iamport-typings';\r\nimport { Post } from '../../types/supabase';\r\nimport { useAtom } from 'jotai';\r\nimport { userAtom, userEmailAtom } from '../components/user/login/Login';\r\n\r\ninterface PaymentProps {\r\n  handlePayment: (paymentInfo: RequestPayParams) => void;\r\n  post: Post;\r\n}\r\n\r\nconst Payment: React.FC<PaymentProps> = ({ handlePayment, post }) => {\r\n  const [jotaiUserData, setJotaiUserData] = useAtom(jotaiUserDataAtom);\r\n  const queryClient = useQueryClient();\r\n\r\n  // 생성한 토큰 가져와서 새로고침 방지\r\n  useEffect(() => {\r\n    const storedUserData = localStorage.getItem('jotaiUserData');\r\n    if (storedUserData) {\r\n      const parsedUserData = JSON.parse(storedUserData);\r\n      setJotaiUserData(parsedUserData);\r\n\r\n      queryClient.invalidateQueries(['users', userEmail]);\r\n    }\r\n  }, []);\r\n\r\n  const handlePaymentClick = (pg: string, post: Post) => {\r\n    if (!post) {\r\n      console.error('Post is not available.');\r\n      return;\r\n    }\r\n\r\n    const paymentInfo: RequestPayParams = {\r\n      pg: pg,\r\n      pay_method: 'card',\r\n      merchant_uid: 'merchant_' + new Date().getTime(),\r\n      name: post.title,\r\n      amount: post.price || 0,\r\n      buyer_name: post.nickname,\r\n      buyer_tel: '010-1234-5678',\r\n      buyer_email: 'test@naver.com'\r\n    };\r\n\r\n    handlePayment(paymentInfo);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={() => handlePaymentClick('kakaopay', post)}>카카오페이 결제</button>\r\n      <button onClick={() => handlePaymentClick('inicis', post)}>이니시스 결제</button>\r\n      <button onClick={() => handlePaymentClick('tosspay', post)}>토스페이 결제</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Payment;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAGxC,SAASC,OAAO,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAQhC,MAAMC,OAA+B,GAAGA,CAAC;EAAEC,aAAa;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EACnE,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGR,OAAO,CAACS,iBAAiB,CAAC;EACpE,MAAMC,WAAW,GAAGC,cAAc,CAAC,CAAC;;EAEpC;EACAZ,SAAS,CAAC,MAAM;IACd,MAAMa,cAAc,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;IAC5D,IAAIF,cAAc,EAAE;MAClB,MAAMG,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACL,cAAc,CAAC;MACjDJ,gBAAgB,CAACO,cAAc,CAAC;MAEhCL,WAAW,CAACQ,iBAAiB,CAAC,CAAC,OAAO,EAAEC,SAAS,CAAC,CAAC;IACrD;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,kBAAkB,GAAGA,CAACC,EAAU,EAAEhB,IAAU,KAAK;IACrD,IAAI,CAACA,IAAI,EAAE;MACTiB,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAC;MACvC;IACF;IAEA,MAAMC,WAA6B,GAAG;MACpCH,EAAE,EAAEA,EAAE;MACNI,UAAU,EAAE,MAAM;MAClBC,YAAY,EAAE,WAAW,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;MAChDC,IAAI,EAAExB,IAAI,CAACyB,KAAK;MAChBC,MAAM,EAAE1B,IAAI,CAAC2B,KAAK,IAAI,CAAC;MACvBC,UAAU,EAAE5B,IAAI,CAAC6B,QAAQ;MACzBC,SAAS,EAAE,eAAe;MAC1BC,WAAW,EAAE;IACf,CAAC;IAEDhC,aAAa,CAACoB,WAAW,CAAC;EAC5B,CAAC;EAED,oBACEtB,OAAA;IAAAmC,QAAA,gBACEnC,OAAA;MAAQoC,OAAO,EAAEA,CAAA,KAAMlB,kBAAkB,CAAC,UAAU,EAAEf,IAAI,CAAE;MAAAgC,QAAA,EAAC;IAAQ;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAC9ExC,OAAA;MAAQoC,OAAO,EAAEA,CAAA,KAAMlB,kBAAkB,CAAC,QAAQ,EAAEf,IAAI,CAAE;MAAAgC,QAAA,EAAC;IAAO;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAC3ExC,OAAA;MAAQoC,OAAO,EAAEA,CAAA,KAAMlB,kBAAkB,CAAC,SAAS,EAAEf,IAAI,CAAE;MAAAgC,QAAA,EAAC;IAAO;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACzE,CAAC;AAEV,CAAC;AAACpC,EAAA,CA1CIH,OAA+B;EAAA,QACOH,OAAO;AAAA;AAAA2C,EAAA,GAD7CxC,OAA+B;AA4CrC,eAAeA,OAAO;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}